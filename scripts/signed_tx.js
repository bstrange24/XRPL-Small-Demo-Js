import fs from 'fs/promises';
import * as xrpl from 'xrpl';
import { getWallets } from './utils.js';
// import { decode } = require('xrpl').binary;

// node .\nft_buy_sell.js X X X CO
const data = await fs.readFile('./config.json', 'utf8');
const config = JSON.parse(data);
const { CURRENCY, ENV, TEST_NET, DEV_NET, WARM_WALLET_SEED, HOT_WALLET_SEED, COLD_WALLET_SEED, ENCRYPTION, ed25519_ENCRYPTION, secp256k1_ENCRYPTION } = config;

const environment = ENV === 'DEVNET' ? DEV_NET : TEST_NET;
const algo = ENCRYPTION === 'secp256k1' ? secp256k1_ENCRYPTION : ed25519_ENCRYPTION;

async function main() {
     const client = new xrpl.Client(environment);
     await client.connect();
     console.log('Connected to XRPL Testnet');

     const signedTx =
          '12001914000022000000002400630E04201B0065657F202A0000000068400000000000000A7321025B30D4BC1AD1504ED9E1AF1965301A45C3AF15162BA5E364653DE87CF686051C7446304402205476E6838E8FFF07579B959E828D0138803D459EFF16C84A474AA224B1939AEC022040B89CE94CCC2FD0A7DFFAE8D9762ADB395FC62B7030024FF3E6B217558A8BEA75AD68747470733A2F2F6D65646961312E67697068792E636F6D2F6D656469612F76312E59326C6B505463354D4749334E6A45784D6A687562477075626D733062586C355A7A4D3063574534617A453561546C794F4852794E6D56686432707263446331616D343363695A6C634431324D563970626E526C636D35686246396E61575A66596E6C666157516D593351395A772F4E7877676C584C714D654F755246334648762F67697068792E67696681143216D9D4672573232AE1E939D17DBD8251E60AEB'; // your hex blob
     const decoded = xrpl.decode(signedTx);
     console.log(decoded);

     await client.disconnect();
     console.log('\nAll done.');
}

main().catch(console.error);
